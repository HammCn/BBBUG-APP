(this["webpackJsonp"]=this["webpackJsonp"]||[]).push([["app-service"],{"0395":function(s,e,t){"use strict";t.r(e);var i=t("ec2a"),a=t.n(i);for(var n in i)"default"!==n&&function(s){t.d(e,s,(function(){return i[s]}))}(n);e["default"]=a.a},"0810":function(s,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{app:getApp(),songList:[],room_id:0,isPullDown:!1,page:1,isLoading:!1}},onLoad:function(s){this.room_id=s.room_id||0},onPullDownRefresh:function(){this.isPullDown=!0,this.page=1,this.getMySongList()},onReachBottom:function(){var s=this;s.isLoading||(s.page++,s.getMySongList())},onShow:function(){var s=this;s.getMySongList()},methods:{getMySongList:function(){var s=this;s.isLoading=!0,s.app.request({url:"song/mySongList",data:{page:s.page},loading:"\u8bfb\u53d6\u4e2d",success:function(e){s.isLoading=!1,s.isPullDown&&(uni.stopPullDownRefresh(),s.isPullDown=!1),1==s.page?s.songList=e.data:s.songList=s.songList.concat(e.data)}})},showMenu:function(s){var e=this;uni.showActionSheet({itemList:["\u70b9\u6b4c","\u5220\u9664"],success:function(t){switch(t.tapIndex){case 0:e.app.request({url:"song/addSong",data:{mid:s.mid,at:null,room_id:e.room_id},loading:"\u70b9\u6b4c\u4e2d",success:function(s){e.getMySongList(),uni.showToast({title:"\u70b9\u6b4c\u6210\u529f"})}});break;case 1:uni.showToast({icon:"none",title:"\u5373\u5c06\u4e0a\u7ebf"});break;default:}}})}}};e.default=i},"0de9":function(s,e,t){"use strict";function i(s){var e=Object.prototype.toString.call(s);return e.substring(8,e.length-1)}function a(){return"string"===typeof __channelId__&&__channelId__}function n(s){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];console[s].apply(console,t)}function o(){for(var s=arguments.length,e=new Array(s),t=0;t<s;t++)e[t]=arguments[t];var n=e.shift();if(a())return e.push(e.pop().replace("at ","uni-app:///")),console[n].apply(console,e);var o=e.map((function(s){var e=Object.prototype.toString.call(s).toLowerCase();if("[object object]"===e||"[object array]"===e)try{s="---BEGIN:JSON---"+JSON.stringify(s)+"---END:JSON---"}catch(a){s="[object object]"}else if(null===s)s="---NULL---";else if(void 0===s)s="---UNDEFINED---";else{var t=i(s).toUpperCase();s="NUMBER"===t||"BOOLEAN"===t?"---BEGIN:"+t+"---"+s+"---END:"+t+"---":String(s)}return s})),r="";if(o.length>1){var c=o.pop();r=o.join("---COMMA---"),0===c.indexOf(" at ")?r+=c:r+="---COMMA---"+c}else r=o[0];console[n](r)}t.r(e),t.d(e,"log",(function(){return n})),t.d(e,"default",(function(){return o}))},1057:function(s,e,t){"use strict";t.r(e);var i=t("b220"),a=t.n(i);for(var n in i)"default"!==n&&function(s){t.d(e,s,(function(){return i[s]}))}(n);e["default"]=a.a},"191a":function(s,e,t){"use strict";t.r(e);var i=t("4f09"),a=t("4d7d");for(var n in a)"default"!==n&&function(s){t.d(e,s,(function(){return a[s]}))}(n);var o,r=t("f0c5"),c=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);e["default"]=c.exports},"19ff":function(s,e,t){"use strict";var i;t.d(e,"b",(function(){return a})),t.d(e,"c",(function(){return n})),t.d(e,"a",(function(){return i}));var a=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("view",{staticClass:s._$s(0,"sc","uniapp"),attrs:{_i:0}},[s._$s(1,"i",s.userInfo)?t("view",{staticClass:s._$s(1,"sc","top"),attrs:{_i:1}},[t("view",{staticClass:s._$s(2,"sc","headimg"),attrs:{_i:2}},[t("image",{attrs:{src:s._$s(3,"a-src",s.urldecode(s.userInfo.user_head)),_i:3}})]),t("view",{staticClass:s._$s(4,"sc","username"),attrs:{_i:4}},[s._v(s._$s(4,"t0-0",s._s(s.urldecode(s.userInfo.user_name))))]),t("view",{staticClass:s._$s(5,"sc","desc"),attrs:{_i:5}},[s._v(s._$s(5,"t0-0",s._s(s.urldecode(s.userInfo.user_remark))))]),t("view",[t("view",{staticClass:s._$s(7,"sc","weui-flex"),attrs:{_i:7}},[t("view",{staticClass:s._$s(8,"sc","weui-flex__item"),attrs:{_i:8}},[t("view",{},[t("view",{staticClass:s._$s(10,"sc","top_value"),attrs:{_i:10}},[s._v(s._$s(10,"t0-0",s._s(s.userInfo.user_song)))]),t("view",{staticClass:s._$s(11,"sc","top_key"),attrs:{_i:11}})])]),t("view",{staticClass:s._$s(12,"sc","weui-flex__item"),attrs:{_i:12}},[t("view",{},[t("view",{staticClass:s._$s(14,"sc","top_value"),attrs:{_i:14}},[s._v(s._$s(14,"t0-0",s._s(s.userInfo.user_img)))]),t("view",{staticClass:s._$s(15,"sc","top_key"),attrs:{_i:15}})])]),t("view",{staticClass:s._$s(16,"sc","weui-flex__item"),attrs:{_i:16}},[t("view",{},[t("view",{staticClass:s._$s(18,"sc","top_value"),attrs:{_i:18}},[s._v(s._$s(18,"t0-0",s._s(s.userInfo.user_chat)))]),t("view",{staticClass:s._$s(19,"sc","top_key"),attrs:{_i:19}})])]),t("view",{staticClass:s._$s(20,"sc","weui-flex__item"),attrs:{_i:20}},[t("view",{},[t("view",{staticClass:s._$s(22,"sc","top_value"),attrs:{_i:22}},[s._v(s._$s(22,"t0-0",s._s(s.userInfo.user_gamesongscore)))]),t("view",{staticClass:s._$s(23,"sc","top_key"),attrs:{_i:23}})])])])])]):s._e(),t("view",{staticClass:s._$s(24,"sc","weui-cells"),attrs:{_i:24}},[t("navigator",{staticClass:s._$s(25,"sc","weui-cell weui-cell_access"),attrs:{_i:25}},[t("view",{staticClass:s._$s(26,"sc","weui-cell__bd"),attrs:{_i:26}},[t("view",[t("i",{staticClass:s._$s(28,"sc","item iconfont icon-icon_message"),attrs:{_i:28}})])]),t("view",{staticClass:s._$s(29,"sc","weui-cell__ft"),attrs:{_i:29}})]),s._$s(30,"i",s.userInfo.myRoom)?t("view",{staticClass:s._$s(30,"sc","weui-cell weui-cell_access"),attrs:{_i:30},on:{click:s.doJoinMyRoom}},[t("view",{staticClass:s._$s(31,"sc","weui-cell__bd"),attrs:{_i:31}},[t("view",[t("i",{staticClass:s._$s(33,"sc","item iconfont icon-icon_message"),attrs:{_i:33}})])]),t("view",{staticClass:s._$s(34,"sc","weui-cell__ft"),attrs:{_i:34}})]):s._e(),s._$s(35,"i",!s.userInfo.myRoom)?t("view",{staticClass:s._$s(35,"sc","weui-cell weui-cell_access"),attrs:{_i:35},on:{click:s.doCreateRoom}},[t("view",{staticClass:s._$s(36,"sc","weui-cell__bd"),attrs:{_i:36}},[t("view",[t("i",{staticClass:s._$s(38,"sc","item iconfont icon-icon_message"),attrs:{_i:38}})])]),t("view",{staticClass:s._$s(39,"sc","weui-cell__ft"),attrs:{_i:39}})]):s._e()]),t("view",{staticClass:s._$s(40,"sc","weui-cells"),attrs:{_i:40}},[s._$s(41,"i",s.userInfo)?t("view",{staticClass:s._$s(41,"sc","weui-cell weui-cell_access"),attrs:{_i:41},on:{click:s.doLogout}},[t("view",{staticClass:s._$s(42,"sc","weui-cell__bd"),attrs:{_i:42}},[t("view",[t("i",{staticClass:s._$s(44,"sc","item iconfont icon-poweroff"),attrs:{_i:44}})])]),t("view",{staticClass:s._$s(45,"sc","weui-cell__ft"),attrs:{_i:45}})]):s._e()])])},n=[]},"201e":function(s,e,t){"use strict";var i;t.d(e,"b",(function(){return a})),t.d(e,"c",(function(){return n})),t.d(e,"a",(function(){return i}));var a=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("view",{staticClass:s._$s(0,"sc","uniapp"),attrs:{_i:0}},s._l(s._$s(1,"f",{forItems:s.roomList}),(function(e,i,a,n){return t("view",{key:s._$s(1,"f",{forIndex:a,key:"1-"+n}),staticClass:s._$s("1-"+n,"sc","roomBg"),attrs:{_i:"1-"+n},on:{click:function(t){return s.doEnterRoom(e)}}},[t("view",{staticClass:s._$s("2-"+n,"sc","roomTitle"),attrs:{_i:"2-"+n}},[s._$s("3-"+n,"i",0==e.room_type)?t("i",{staticClass:s._$s("3-"+n,"sc","iconfont roomType icon-xiaoxi2"),attrs:{_i:"3-"+n}}):s._e(),s._$s("4-"+n,"i",1==e.room_type)?t("i",{staticClass:s._$s("4-"+n,"sc","iconfont roomType icon-changyongtubiao-mianxing-61"),attrs:{_i:"4-"+n}}):s._e(),s._$s("5-"+n,"i",2==e.room_type)?t("i",{staticClass:s._$s("5-"+n,"sc","iconfont roomType icon-shezhi3"),attrs:{_i:"5-"+n}}):s._e(),s._$s("6-"+n,"i",3==e.room_type)?t("i",{staticClass:s._$s("6-"+n,"sc","iconfont roomType icon-book"),attrs:{_i:"6-"+n}}):s._e(),s._v(s._$s("2-"+n,"t4-0",s._s(e.room_name))),s._$s("7-"+n,"i",e.room_online>0)?t("font",{staticClass:s._$s("7-"+n,"sc","roomOnline"),attrs:{_i:"7-"+n}},[s._v(s._$s("7-"+n,"t0-0",s._s(e.room_online)))]):s._e(),t("span",{staticClass:s._$s("8-"+n,"sc","roomRight"),attrs:{_i:"8-"+n}},[s._$s("9-"+n,"i",1==e.room_public)?t("i",{staticClass:s._$s("9-"+n,"sc","iconfont icon-lock-fill roomLock"),attrs:{_i:"9-"+n}}):s._e(),t("span",{staticClass:s._$s("10-"+n,"sc","roomId"),attrs:{_i:"10-"+n}},[s._v(s._$s("10-"+n,"t0-0",s._s(e.room_id)))])])],1),t("view",{staticClass:s._$s("11-"+n,"sc","roomBottom"),attrs:{_i:"11-"+n}},[t("image",{staticClass:s._$s("12-"+n,"sc","roomImage"),attrs:{src:s._$s("12-"+n,"a-src",e.user_head||"/static/image/nohead.jpg"),_i:"12-"+n}}),t("view",{staticClass:s._$s("13-"+n,"sc","roomUser"),attrs:{_i:"13-"+n}},[t("view",[s._v(s._$s("14-"+n,"t0-0",s._s(s.app.libs.urldecode(e.user_name))))]),t("view",{staticClass:s._$s("15-"+n,"sc","roomNotice"),attrs:{_i:"15-"+n}},[s._v(s._$s("15-"+n,"t0-0",s._s(e.room_notice||"\u672a\u586b\u5199\u623f\u95f4\u516c\u544a")))])])])])})),0)},n=[]},"286f":function(s,e,t){"use strict";(function(s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={data:function(){return{scrollTop:0,style:{pageHeight:0,contentViewHeight:0,footViewHeight:90,mitemHeight:0},bgAudioMannager:null,config:{lockScreen:!1},showMenuBox:!1,loading:!1,showRoomPage:!1,showPasswordForm:!1,app:getApp(),userInfo:null,song:{song:null,user:null},room_id:0,room:!1,password:"",animationData:{},rotate:0,playerTimer:null,chatType:"text",historyKey:"historyList_",historyList:[],messageObj:{message:"",at:!1,focus:!1}}},mounted:function(){var s=uni.getSystemInfoSync();this.style.pageHeight=s.windowHeight,this.style.contentViewHeight=s.windowHeight-uni.getSystemInfoSync().screenWidth/750*100-40},onLoad:function(e){var t=this;t.bgAudioMannager=uni.getBackgroundAudioManager(),this.room_id=uni.getStorageSync("room_id")||888,t.app.user.getMyInfo({success:function(s){t.userInfo=s,t.getRoomInfo()}}),uni.$on("WebSocketMessage",(function(e){try{t.messageController(JSON.parse(e))}catch(i){s("error",i," at pages/room/index.vue:211")}})),uni.$on("IndexReload",(function(){t.app.user.getMyInfo({success:function(s){t.userInfo=s,t.getRoomInfo()}})})),uni.$on("AtUserEvent",(function(s){t.doAtUser(s)})),uni.$on("RoomChanged",(function(s){uni.setNavigationBarTitle({title:"\u6b63\u5728\u8fdb\u5165"}),t.room_id=s,t.showPasswordForm=!1,t.showRoomPage=!1,t.password="",uni.setStorageSync("room_id",parseInt(t.room_id)),t.getRoomInfo()})),uni.onKeyboardHeightChange((function(s){var e=uni.getSystemInfoSync();t.style.pageHeight=e.windowHeight,t.style.contentViewHeight=e.windowHeight-uni.getSystemInfoSync().screenWidth/750*100-(0==s.height?40:20)-s.height,t.autoScroll()})),t.bgAudioMannager.onCanplay((function(){t.runPlayAnimation();var s=parseInt((new Date).valueOf()/1e3)-t.song.since-3;t.bgAudioMannager.seek(s>0?s:0)})),t.bgAudioMannager.onEnded((function(){t.stopPlayerAnimation(),t.song={song:null,user:null}}))},onShow:function(){var s=this;s.bgAudioMannager.src&&s.bgAudioMannager.play(),s.password="",s.autoScroll()},onNavigationBarButtonTap:function(e){var t=this;switch(s("log",e," at pages/room/index.vue:266"),e.text){case"\u6362\u623f":uni.navigateTo({url:"./select"});break;case"\u6211\u7684":t.userInfo.user_id<=0?t.app.user.login():uni.navigateTo({url:"../user/index"});break;default:}},methods:{doKeyDown:function(){var s=this;s.messageObj.at&&s.messageObj.message.indexOf("@"+decodeURIComponent(s.messageObj.at.user_name))<0&&(s.messageObj.at=!1)},doMusicClicked:function(){var e=this,t=["\u4e0d\u559c\u6b22"];(e.userInfo.user_admin||e.room.room_user==e.userInfo.user_id)&&(t=["\u5207\u6b4c"]),uni.showActionSheet({itemList:t,success:function(i){s("log",i.tapIndex," at pages/room/index.vue:308");var a=t[i.tapIndex];switch(a){case"\u5207\u6b4c":uni.showModal({title:"\u5207\u6b4c\u63d0\u9192",content:"\u662f\u5426\u786e\u8ba4\u5207\u6389\u5f53\u524d\u64ad\u653e\u7684\u6b4c?",cancelText:"\u53d6\u6d88",confirmColor:"#FF4500",confirmText:"\u5207\u6b4c",success:function(s){s.confirm&&e.app.request({url:"song/pass",data:{room_id:e.room_id,mid:e.song.song.mid},success:function(){}})}});break;case"\u4e0d\u559c\u6b22":e.app.request({url:"song/pass",data:{room_id:e.room_id,mid:e.song.song.mid},success:function(s){e.bgAudioMannager.pause(),e.stopPlayerAnimation(),e.song={song:null,user:null},uni.showModal({title:"\u4e0d\u559c\u6b22",content:s.msg,showCancel:!1,success:function(){}})}});break;default:}}})},doAtUser:function(s){var e=this;e.messageObj.at=s,e.messageObj.message="@"+decodeURIComponent(s.user_name)+" "+e.messageObj.message,e.messageObj.focus=!0},autoScroll:function(){var e=this;e.$nextTick((function(){var t=uni.createSelectorQuery();t.select("#historyList").boundingClientRect(),t.select("#historyBox").boundingClientRect(),t.exec((function(t){t[0]&&t[1]&&(s("log",t[0].height," at pages/room/index.vue:374"),s("log",t[1].height," at pages/room/index.vue:375"),e.scrollTop=t[1].height-t[0].height+150)}))}))},historyClicked:function(){var s=this;s.showMenuBox=!1,uni.hideKeyboard()},saveMessageHistory:function(){var s=this;uni.setStorageSync(s.historyKey+s.room_id,JSON.stringify(s.historyList))},messageController:function(e){var t=this;switch(s("log",e.type," at pages/room/index.vue:392"),e.type){case"text":case"img":case"system":t.addMessageToList(e);break;case"addSong":e.at?t.addSystemMessage(decodeURIComponent(e.user.user_name)+" \u9001\u4e86\u4e00\u9996 \u300a"+e.song.name+"\u300b \u7ed9 "+decodeURIComponent(e.at.user_name),"#333"):t.addSystemMessage(decodeURIComponent(e.user.user_name)+" \u70b9\u4e86\u4e00\u9996\u300a"+e.song.name+"\u300b","#333"),t.saveMessageHistory();break;case"pass":t.addSystemMessage(decodeURIComponent(e.user.user_name)+" \u5207\u6389\u4e86\u300a"+e.song.name+"\u300b","#ff4500"),t.saveMessageHistory();break;case"chat_bg":t.addSystemMessage(decodeURIComponent(e.user.user_name)+" \u8fd0\u6c14\u5927\u7206\u53d1,\u89e6\u53d1\u4e86\u70b9\u6b4c\u80cc\u666f\u5899\u7279\u6548(1\u5c0f\u65f6\u5185\u64ad\u653e\u6b4c\u66f2\u65f6\u6709\u6548)!","green","#eee"),t.saveMessageHistory();break;case"push":t.addSystemMessage(decodeURIComponent(e.user.user_name)+" \u5c06\u6b4c\u66f2 \u300a"+e.song.name+"\u300b \u8bbe\u4e3a\u7f6e\u9876\u5019\u64ad\u653e"),t.saveMessageHistory();break;case"removeSong":t.addSystemMessage(decodeURIComponent(e.user.user_name)+" \u5c06\u6b4c\u66f2 \u300a"+e.song.name+"\u300b \u4ece\u961f\u5217\u79fb\u9664"),t.saveMessageHistory();break;case"removeban":t.addSystemMessage(decodeURIComponent(e.user.user_name)+" \u5c06 "+decodeURIComponent(e.ban.user_name)+" \u89e3\u7981"),t.saveMessageHistory();break;case"shutdown":t.addSystemMessage(decodeURIComponent(e.user.user_name)+" \u7981\u6b62\u4e86\u7528\u6237 "+decodeURIComponent(e.ban.user_name)+" \u53d1\u8a00"),t.saveMessageHistory();break;case"songdown":t.addSystemMessage(decodeURIComponent(e.user.user_name)+" \u7981\u6b62\u4e86\u7528\u6237 "+decodeURIComponent(e.ban.user_name)+" \u70b9\u6b4c"),t.saveMessageHistory();break;case"back":for(var i=0;i<t.historyList.length;i++)if(t.historyList[i].key==e.key){t.historyList.splice(i,1);break}t.addSystemMessage(decodeURIComponent(e.user.user_name)+" \u64a4\u56de\u4e86\u4e00\u6761\u6d88\u606f"),t.saveMessageHistory();break;case"playSong":t.playMusic(e);break;default:}},playMusic:function(e){var t=this;t.song.song&&t.song.song.mid==e.song.mid||(s("log","Play Music"," at pages/room/index.vue:460"),t.song=e,t.bgAudioMannager.title="\u6b63\u5728\u64ad\u653e "+e.song.name,t.bgAudioMannager.singer=e.song.singer+" - "+t.room.room_name,t.bgAudioMannager.coverImgUrl=e.song.pic,t.bgAudioMannager.src="https://api.bbbug.com/api/song/playurl?mid="+e.song.mid,t.bgAudioMannager.play(),t.addSystemMessage("\u6b63\u5728\u64ad\u653e "+e.song.name+"("+e.song.singer+")"))},doSendMessage:function(s){var e=this,t=e.messageObj.message,i=t;e.messageObj.message="",t&&(e.messageObj.at&&(i=t.replace("@"+decodeURIComponent(e.messageObj.at.user_name),"")),e.app.request({url:"message/send",data:{type:"text",where:"channel",to:e.room_id,msg:encodeURIComponent(i),at:e.messageObj.at},success:function(s){},error:function(s){e.messageObj.message=t,uni.showModal({title:"\u53d1\u9001\u5931\u8d25",content:s.msg,showCancel:!1})}}))},addMessageToList:function(s){var e=this;e.historyList.length>100&&e.historyList.shift(),e.historyList.push(s),e.saveMessageHistory(),e.autoScroll()},runPlayAnimation:function(){var s=this;s.stopPlayerAnimation();var e=uni.createAnimation({duration:1e4,timingFunction:"linear"});s.rotate+=60,s.rotate>360&&(s.rotate=0),s.rotate-=180,e.rotate(s.rotate).step(),s.animationData=e.export(),clearTimeout(s.playerTimer),s.playerTimer=setTimeout(function(){s.runPlayAnimation()}.bind(s),1e4)},stopPlayerAnimation:function(){var s=this;clearTimeout(s.playerTimer),s.animationData={}},urldecode:function(s){return decodeURIComponent(s)},getRoomInfo:function(){var e=this;uni.showLoading({title:"\u8fde\u63a5\u623f\u95f4\u670d\u52a1\u5668"}),e.app.request({url:"room/getRoomInfo",data:{room_id:e.room_id,room_password:e.password},success:function(t){e.room=t.data,uni.setNavigationBarTitle({title:e.room.room_name}),e.app.request({url:"room/getWebsocketUrl",data:{channel:e.room_id},success:function(s){uni.hideLoading(),e.app.webSocket.config.wssUrl="wss://websocket.bbbug.com/?account="+s.data.account+"&channel="+s.data.channel+"&ticket="+s.data.ticket,e.app.webSocket.isConnected||e.app.webSocket.connectWss();uni.getStorageSync(e.historyKey+e.room_id);e.addSystemMessage(e.room.room_notice||"\u670d\u52a1\u5668\u8fde\u63a5\u6210\u529f"),e.showPasswordForm=!1,e.showRoomPage=!0,e.autoScroll()},error:function(e){s("log",e," at pages/room/index.vue:574")}})},error:function(s){uni.hideLoading(),403==s.code?(uni.setNavigationBarTitle({title:"\u5bc6\u7801\u623f"}),e.showPasswordForm=!0,e.showRoomPage=!1,e.password&&uni.showModal({showCancel:!1,title:"\u8fdb\u5165\u5931\u8d25",content:s.msg,success:function(){}})):uni.showModal({showCancel:!1,title:"\u8fdb\u5165\u5931\u8d25",content:s.msg,success:function(){uni.navigateBack()}})}})},addSystemMessage:function(s){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#999",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"tansparent",i=this;i.historyList.push({type:"system",content:s,bg:t,color:e}),i.autoScroll()},doOpenPage:function(s){var e=this;switch(e.showMenuBox=!1,s){case"addSong":uni.navigateTo({url:"../song/search?room_id="+e.room_id});break;case"mySong":uni.navigateTo({url:"../song/my?room_id="+e.room_id});break;case"songList":uni.navigateTo({url:"../song/list?room_id="+e.room_id});break;case"onLine":var t=0;(e.userInfo.user_admin||e.room.room_user==e.userInfo.user_id)&&(t=1),uni.navigateTo({url:"./online?room_id="+e.room_id+"&room_admin="+t});break;default:}},showMenuUserHead:function(e){s("log",e," at pages/room/index.vue:649");var t=e.user,i=this,a=["\u8fdb\u5165\u4e3b\u9875","@\u4e00\u4e0bTa","\u9001\u6b4c\u7ed9Ta"];i.userInfo.user_admin||i.room.room_user==i.userInfo.user_id?a=["\u8fdb\u5165\u4e3b\u9875","@\u4e00\u4e0bTa","\u9001\u6b4c\u7ed9Ta","\u64a4\u56de\u6d88\u606f","\u7981\u6b62\u70b9\u6b4c","\u7981\u6b62\u53d1\u8a00","\u5168\u90e8\u89e3\u7981"]:t.user_id==i.userInfo.user_id&&(a=["\u8fdb\u5165\u4e3b\u9875","@\u4e00\u4e0bTa","\u9001\u6b4c\u7ed9Ta","\u64a4\u56de\u6d88\u606f"]),uni.showActionSheet({itemList:a,success:function(s){switch(a[s.tapIndex]){case"\u9001\u6b4c\u7ed9Ta":uni.navigateTo({url:"../song/search?room_id="+i.room_id+"&at="+t.user_id+"&name="+t.user_name});break;case"@\u4e00\u4e0bTa":i.doAtUser(t);break;case"\u5168\u90e8\u89e3\u7981":i.app.request({url:"user/removeban",data:{room_id:i.room_id,user_id:t.user_id},loading:"\u89e3\u7981\u4e2d",success:function(s){uni.showModal({title:"\u89e3\u7981\u6210\u529f",content:s.msg,showCancel:!1,success:function(){i.getuserList()}})}});break;case"\u7981\u6b62\u53d1\u8a00":i.app.request({url:"user/shutdown",data:{room_id:i.room_id,user_id:t.user_id},loading:"\u7981\u8a00\u4e2d",success:function(s){uni.showModal({title:"\u7981\u8a00\u6210\u529f",content:s.msg,showCancel:!1,success:function(){i.getuserList()}})}});break;case"\u7981\u6b62\u70b9\u6b4c":i.app.request({url:"user/songdown",data:{room_id:i.room_id,user_id:t.user_id},loading:"\u7981\u6b4c\u4e2d",success:function(s){uni.showModal({title:"\u7981\u6b4c\u6210\u529f",content:s.msg,showCancel:!1,success:function(){i.getuserList()}})}});break;default:}}})},getStaticUrl:function(s){return s.indexOf("https://")>-1||s.indexOf("http://")>-1?s:"https://api.bbbug.com/uploads/"+s},chooseImage:function(){var e=this;e.showMenuBox=!1,uni.chooseImage({sizeType:"compressed",sourceType:["album"],count:1,fail:function(e){s("log",e," at pages/room/index.vue:753")},success:function(s){uni.showLoading({title:"\u5904\u7406\u4e2d"}),uni.compressImage({src:s.tempFilePaths[0],quality:50,success:function(s){uni.uploadFile({url:e.app.globalData.request.apiUrl+"attach/uploadimage",filePath:s.tempFilePath,name:"file",formData:e.app.globalData.request.baseData,success:function(s){uni.hideLoading();var t={};try{t=JSON.parse(s.data)}catch(i){uni.showModal({showCancel:!1,title:"\u4e0a\u4f20\u5931\u8d25",content:"\u670d\u52a1\u5668\u53d1\u751f\u9519\u8bef",success:function(){}})}200==t.code?e.app.request({url:"message/send",data:{where:"channel",to:e.room_id,type:"img",msg:t.data.attach_thumb,resource:t.data.attach_path},success:function(s){},error:function(s){e.messageObj.message=message_old,uni.showModal({title:"\u53d1\u9001\u5931\u8d25",content:s.msg,showCancel:!1})}}):uni.showModal({showCancel:!1,title:"\u4e0a\u4f20\u5931\u8d25",content:t.msg,success:function(){}})}})}})}})},fullViewImage:function(s){uni.previewImage({urls:[s],longPressActions:{itemList:["\u4fdd\u5b58\u56fe\u7247","\u4e3e\u62a5\u56fe\u7247"],success:function(s){},fail:function(s){}}})}}};e.default=t}).call(this,t("0de9")["default"])},"2bc4":function(s,e,t){"use strict";(function(s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={data:function(){return{app:getApp(),userInfo:{}}},onLoad:function(){},onShow:function(){var s=this;s.getMyInfo()},methods:{doCreateRoom:function(){uni.navigateTo({url:"../room/create"})},doJoinMyRoom:function(){var s=this;uni.showModal({title:"\u6362\u623f\u63d0\u9192",content:"\u6362\u623f\u5c06\u9000\u51fa\u4e4b\u524d\u6240\u5728\u7684\u623f\u95f4,\u662f\u5426\u786e\u8ba4?",cancelText:"\u505c\u7559",confirmColor:"#FF4500",confirmText:"\u786e\u8ba4",success:function(e){e.confirm&&(uni.showLoading({title:"\u8fde\u63a5\u623f\u95f4\u4e2d"}),s.doLoopToEnter(s.userInfo.myRoom))}})},doLoopToEnter:function(e){var t=this;s("log",t.app.webSocket.isConnected," at pages/user/index.vue:114"),t.app.webSocket.isConnected?(t.isEntering||(t.app.webSocket.closeWss(),t.app.webSocket.connection=null,t.app.webSocket.config.wssUrl="",t.isEntering=!0),setTimeout((function(){t.doLoopToEnter(e)}),100)):(uni.hideLoading(),uni.$emit("RoomChanged",e.room_id),uni.navigateBack())},urldecode:function(s){return decodeURIComponent(s)},getMyInfo:function(){var s=this;s.app.user.getMyInfo({success:function(e){s.userInfo=e}})},doLogin:function(){var s=this;s.app.user.login()},doLogout:function(){var s=this;s.app.user.logout({success:function(){s.userInfo=null,uni.$emit("IndexReload"),uni.navigateBack()}})}}};e.default=t}).call(this,t("0de9")["default"])},"306d":function(s,e,t){"use strict";t.r(e);var i=t("1057");for(var a in i)"default"!==a&&function(s){t.d(e,s,(function(){return i[s]}))}(a);var n,o,r,c,u=t("f0c5"),l=Object(u["a"])(i["default"],n,o,!1,null,null,null,!1,r,c);e["default"]=l.exports},"31c4":function(s,e,t){"use strict";var i;t.d(e,"b",(function(){return a})),t.d(e,"c",(function(){return n})),t.d(e,"a",(function(){return i}));var a=function(){var s=this,e=s.$createElement,i=s._self._c||e;return i("view",{staticClass:s._$s(0,"sc","uniapp"),attrs:{_i:0}},[s._$s(1,"i",0==s.userList.length)?i("view",[i("view",{staticClass:s._$s(2,"sc","tipImage"),attrs:{_i:2}},[i("image",{staticClass:s._$s(3,"sc","img"),attrs:{src:s._$s(3,"a-src",t("851c")),_i:3}})]),i("view",{staticClass:s._$s(4,"sc","tipText"),attrs:{_i:4}})]):s._e(),s._$s(5,"i",s.userList.length>0)?i("view",{staticClass:s._$s(5,"sc","weui-panel weui-panel_access userList"),attrs:{_i:5}},[i("view",{staticClass:s._$s(6,"sc","weui-panel__bd"),attrs:{_i:6}},s._l(s._$s(7,"f",{forItems:s.userList}),(function(e,t,a,n){return i("view",{key:s._$s(7,"f",{forIndex:a,key:"7-"+n}),staticClass:s._$s("7-"+n,"sc","weui-media-box weui-media-box_appmsg"),attrs:{_i:"7-"+n},on:{click:function(t){return s.showMenu(e)}}},[i("view",{staticClass:s._$s("8-"+n,"sc","weui-media-box__hd"),attrs:{_i:"8-"+n}},[i("img",{staticClass:s._$s("9-"+n,"sc","weui-media-box__thumb"),attrs:{src:s._$s("9-"+n,"a-src",e.user_head||"/static/image/nohead.jpg"),_i:"9-"+n}})]),i("view",{staticClass:s._$s("10-"+n,"sc","weui-media-box__bd"),attrs:{_i:"10-"+n}},[i("view",{staticClass:s._$s("11-"+n,"sc","weui-media-box__title"),attrs:{_i:"11-"+n}},[s._$s("12-"+n,"i",1==e.user_sex)?i("i",{staticClass:s._$s("12-"+n,"sc","iconfont icon-xingbie-nan"),attrs:{_i:"12-"+n}}):s._e(),s._$s("13-"+n,"i",0==e.user_sex)?i("i",{staticClass:s._$s("13-"+n,"sc","iconfont icon-xingbie-nv"),attrs:{_i:"13-"+n}}):s._e(),s._v(s._$s("11-"+n,"t2-0",s._s(s.urldecode(e.user_name))))]),i("view",{staticClass:s._$s("14-"+n,"sc","weui-media-box__desc"),attrs:{_i:"14-"+n}},[i("view",{staticClass:s._$s("15-"+n,"sc","status"),attrs:{_i:"15-"+n}},[i("view",{staticClass:s._$s("16-"+n,"sc","badge"),attrs:{_i:"16-"+n}},[s._v(s._$s("16-"+n,"t0-0",s._s(e.user_id)))]),s._$s("17-"+n,"i",e.user_shutdown)?i("view",{staticClass:s._$s("17-"+n,"sc","badge"),attrs:{_i:"17-"+n}}):s._e(),s._$s("18-"+n,"i",e.user_songdown)?i("view",{staticClass:s._$s("18-"+n,"sc","badge"),attrs:{_i:"18-"+n}}):s._e()]),i("view",[s._v(s._$s("19-"+n,"t0-0",s._s(s.urldecode(e.user_remark))))])])])])})),0)]):s._e()])},n=[]},3694:function(s,e,t){"use strict";var i;t.d(e,"b",(function(){return a})),t.d(e,"c",(function(){return n})),t.d(e,"a",(function(){return i}));var a=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("view",{staticClass:s._$s(0,"sc","content"),attrs:{_i:0}},[t("form",{},[t("view",{staticClass:s._$s(2,"sc","weui-cells weui-cells_after-title"),attrs:{_i:2}},[t("view",{staticClass:s._$s(3,"sc","weui-cell weui-cell_input"),attrs:{_i:3}},[t("view",{staticClass:s._$s(4,"sc","weui-cell__hd"),attrs:{_i:4}},[t("view",{staticClass:s._$s(5,"sc","weui-label"),attrs:{_i:5}})]),t("view",{staticClass:s._$s(6,"sc","weui-cell__ft"),attrs:{_i:6}},[t("image",{staticClass:s._$s(7,"sc","weui-media-box__thumb"),attrs:{src:s._$s(7,"a-src",s.formData.user_head||"/static/image/nohead.jpg"),_i:7},on:{click:s.chooseImage}})])]),t("view",{staticClass:s._$s(8,"sc","weui-cell weui-cell_input"),attrs:{_i:8}},[t("view",{staticClass:s._$s(9,"sc","weui-cell__hd"),attrs:{_i:9}},[t("view",{staticClass:s._$s(10,"sc","weui-label"),attrs:{_i:10}})]),t("view",{staticClass:s._$s(11,"sc","weui-cell__bd"),attrs:{_i:11}},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.formData.user_name,expression:"formData.user_name"}],staticClass:s._$s(12,"sc","weui-input"),attrs:{_i:12},domProps:{value:s._$s(12,"v-model",s.formData.user_name)},on:{input:function(e){e.target.composing||s.$set(s.formData,"user_name",e.target.value)}}})])]),t("view",{staticClass:s._$s(13,"sc","weui-cell weui-cell_input"),attrs:{_i:13}},[t("view",{staticClass:s._$s(14,"sc","weui-cell__hd"),attrs:{_i:14}},[t("view",{staticClass:s._$s(15,"sc","weui-label"),attrs:{_i:15}})]),t("view",{staticClass:s._$s(16,"sc","weui-cell__bd"),attrs:{_i:16}},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.formData.user_remark,expression:"formData.user_remark"}],staticClass:s._$s(17,"sc","weui-input"),attrs:{_i:17},domProps:{value:s._$s(17,"v-model",s.formData.user_remark)},on:{input:function(e){e.target.composing||s.$set(s.formData,"user_remark",e.target.value)}}})])]),t("view",{staticClass:s._$s(18,"sc","weui-cell weui-cell_input"),attrs:{_i:18}},[t("view",{staticClass:s._$s(19,"sc","weui-cell__hd"),attrs:{_i:19}},[t("view",{staticClass:s._$s(20,"sc","weui-label"),attrs:{_i:20}})]),t("view",{staticClass:s._$s(21,"sc","weui-cell__bd"),attrs:{_i:21}},[t("picker",{attrs:{value:s._$s(22,"a-value",s.formData.user_sex),range:s._$s(22,"a-range",s.sexList),_i:22},on:{change:s.onSexChanged}},[t("view",{staticClass:s._$s(23,"sc","uni-input"),attrs:{_i:23}},[s._v(s._$s(23,"t0-0",s._s(s.sexList[s.formData.user_sex].title)))])])])]),t("view",{staticClass:s._$s(24,"sc","weui-cell weui-cell_input"),attrs:{_i:24}},[t("view",{staticClass:s._$s(25,"sc","weui-cell__hd"),attrs:{_i:25}},[t("view",{staticClass:s._$s(26,"sc","weui-label"),attrs:{_i:26}})]),t("view",{staticClass:s._$s(27,"sc","weui-cell__bd"),attrs:{_i:27}},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.formData.user_password,expression:"formData.user_password"}],staticClass:s._$s(28,"sc","weui-input"),attrs:{_i:28},domProps:{value:s._$s(28,"v-model",s.formData.user_password)},on:{input:function(e){e.target.composing||s.$set(s.formData,"user_password",e.target.value)}}})])])]),t("view",{staticClass:s._$s(29,"sc","weui-btn-area"),attrs:{_i:29}},[t("button",{staticClass:s._$s(30,"sc","weui-btn weui-btn_primary"),attrs:{_i:30},on:{click:s.doSubmit}})])])])},n=[]},"4d7d":function(s,e,t){"use strict";t.r(e);var i=t("4f42"),a=t.n(i);for(var n in i)"default"!==n&&function(s){t.d(e,s,(function(){return i[s]}))}(n);e["default"]=a.a},"4f09":function(s,e,t){"use strict";var i;t.d(e,"b",(function(){return a})),t.d(e,"c",(function(){return n})),t.d(e,"a",(function(){return i}));var a=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("view",{staticClass:s._$s(0,"sc","content"),attrs:{_i:0}},[t("view",{staticClass:s._$s(1,"sc","title"),attrs:{_i:1}}),t("view",{staticClass:s._$s(2,"sc","desc"),attrs:{_i:2}}),t("form",{},[t("view",{staticClass:s._$s(4,"sc","weui-cells weui-cells_after-title"),attrs:{_i:4}},[t("view",{staticClass:s._$s(5,"sc","weui-cell weui-cell_input"),attrs:{_i:5}},[t("view",{staticClass:s._$s(6,"sc","weui-cell__hd"),attrs:{_i:6}},[t("view",{staticClass:s._$s(7,"sc","weui-label"),attrs:{_i:7}})]),t("view",{staticClass:s._$s(8,"sc","weui-cell__bd"),attrs:{_i:8}},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.user_account,expression:"user_account"}],staticClass:s._$s(9,"sc","weui-input"),attrs:{_i:9},domProps:{value:s._$s(9,"v-model",s.user_account)},on:{input:function(e){e.target.composing||(s.user_account=e.target.value)}}})]),t("view",{staticClass:s._$s(10,"sc","weui-cell__ft"),attrs:{_i:10},on:{click:s.sendEmail}},[t("i",{staticClass:s._$s(11,"sc","iconfont icon-mail"),attrs:{_i:11}})])]),t("view",{staticClass:s._$s(12,"sc","weui-cell weui-cell_input"),attrs:{_i:12}},[t("view",{staticClass:s._$s(13,"sc","weui-cell__hd"),attrs:{_i:13}},[t("view",{staticClass:s._$s(14,"sc","weui-label"),attrs:{_i:14}})]),t("view",{staticClass:s._$s(15,"sc","weui-cell__bd"),attrs:{_i:15}},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.user_password,expression:"user_password"}],staticClass:s._$s(16,"sc","weui-input"),attrs:{_i:16},domProps:{value:s._$s(16,"v-model",s.user_password)},on:{input:function(e){e.target.composing||(s.user_password=e.target.value)}}})])])]),t("view",{staticClass:s._$s(17,"sc","weui-btn-area"),attrs:{_i:17}},[t("button",{staticClass:s._$s(18,"sc","weui-btn weui-btn_primary"),attrs:{_i:18},on:{click:s.doLogin}})])])])},n=[]},"4f42":function(s,e,t){"use strict";(function(s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={data:function(){return{app:getApp(),user_account:"admin@hamm.cn",user_password:""}},mounted:function(){},methods:{doLogin:function(){var e=this;e.app.request({url:"user/login",loading:"Login...",data:{user_account:e.user_account,user_password:e.user_password},success:function(t){s("log",t," at pages/user/login.vue:55"),uni.setStorageSync("access_token",t.data.access_token),e.app.user.getMyInfo(),uni.$emit("IndexReload"),uni.navigateBack()}})},sendEmail:function(){var s=this;s.app.request({url:"sms/email",loading:"\u53d1\u9001\u4e2d",data:{email:s.user_account},success:function(s){uni.showModal({title:"\u53d1\u9001\u6210\u529f",content:s.msg,showCancel:!1})}})}}};e.default=t}).call(this,t("0de9")["default"])},"4fe7":function(s,e,t){"use strict";t.r(e);var i=t("e4c4"),a=t("8114");for(var n in a)"default"!==n&&function(s){t.d(e,s,(function(){return a[s]}))}(n);var o,r=t("f0c5"),c=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);e["default"]=c.exports},"51d9":function(s,e,t){"use strict";t.r(e);var i=t("aad4"),a=t.n(i);for(var n in i)"default"!==n&&function(s){t.d(e,s,(function(){return i[s]}))}(n);e["default"]=a.a},6262:function(s,e,t){"use strict";t.r(e);var i=t("63a5"),a=t("86a1");for(var n in a)"default"!==n&&function(s){t.d(e,s,(function(){return a[s]}))}(n);var o,r=t("f0c5"),c=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);e["default"]=c.exports},"63a5":function(s,e,t){"use strict";var i;t.d(e,"b",(function(){return a})),t.d(e,"c",(function(){return n})),t.d(e,"a",(function(){return i}));var a=function(){var s=this,e=s.$createElement,i=s._self._c||e;return i("view",{staticClass:s._$s(0,"sc","uniapp"),attrs:{_i:0}},[i("view",{staticClass:s._$s(1,"sc","searchbox"),attrs:{_i:1}},[i("form",{attrs:{_i:2},on:{submit:s.doSearchSong}},[i("view",{staticClass:s._$s(3,"sc","weui-cells weui-cells_form"),attrs:{_i:3}},[i("view",{staticClass:s._$s(4,"sc","weui-cell"),attrs:{_i:4}},[i("view",{staticClass:s._$s(5,"sc","weui-cell__bd"),attrs:{_i:5}},[i("input",{directives:[{name:"model",rawName:"v-model",value:s.keyword,expression:"keyword"}],staticClass:s._$s(6,"sc","weui-input"),attrs:{_i:6},domProps:{value:s._$s(6,"v-model",s.keyword)},on:{input:function(e){e.target.composing||(s.keyword=e.target.value)}}})]),i("view",{staticClass:s._$s(7,"sc","weui-cell__ft"),attrs:{_i:7},on:{click:s.doSearchSong}},[i("i",{staticClass:s._$s(8,"sc","iconfont icon-search"),attrs:{_i:8}})])])])])]),s._$s(9,"i",s.at>0)?i("view",{staticClass:s._$s(9,"sc","weui-panel weui-panel_access"),attrs:{_i:9},on:{click:function(e){s.at=0}}},[i("view",{staticClass:s._$s(10,"sc","weui-panel__bd"),attrs:{_i:10}},[i("view",{staticClass:s._$s(11,"sc","weui-media-box weui-media-box_text"),attrs:{_i:11}},[i("view",{staticClass:s._$s(12,"sc","weui-media-box__desc"),attrs:{_i:12}},[i("span"),s._v(s._$s(12,"t1-0",s._s(s.at))+s._$s(12,"t1-1",s._s(s.name)))])])])]):s._e(),s._$s(14,"i",0==s.songList.length)?i("view",[i("view",{staticClass:s._$s(15,"sc","tipImage"),attrs:{_i:15}},[i("image",{staticClass:s._$s(16,"sc","img"),attrs:{src:s._$s(16,"a-src",t("851c")),_i:16}})]),i("view",{staticClass:s._$s(17,"sc","tipText"),attrs:{_i:17}})]):s._e(),s._$s(18,"i",s.songList.length>0)?i("view",{staticClass:s._$s(18,"sc","weui-panel weui-panel_access songList"),attrs:{_i:18}},[i("view",{staticClass:s._$s(19,"sc","weui-panel__bd"),attrs:{_i:19}},s._l(s._$s(20,"f",{forItems:s.songList}),(function(e,t,a,n){return i("view",{key:s._$s(20,"f",{forIndex:a,key:"20-"+n}),staticClass:s._$s("20-"+n,"sc","weui-media-box weui-media-box_appmsg"),attrs:{_i:"20-"+n},on:{click:function(t){return s.showMenu(e)}}},[i("view",{staticClass:s._$s("21-"+n,"sc","weui-media-box__hd"),attrs:{_i:"21-"+n}},[i("img",{staticClass:s._$s("22-"+n,"sc","weui-media-box__thumb song_image"),attrs:{src:s._$s("22-"+n,"a-src",e.pic),_i:"22-"+n}})]),i("view",{staticClass:s._$s("23-"+n,"sc","weui-media-box__bd"),attrs:{_i:"23-"+n}},[i("view",{staticClass:s._$s("24-"+n,"sc","weui-media-box__title"),attrs:{_i:"24-"+n}},[s._v(s._$s("24-"+n,"t0-0",s._s(e.name)))]),i("view",{staticClass:s._$s("25-"+n,"sc","weui-media-box__desc"),attrs:{_i:"25-"+n}},[s._v(s._$s("25-"+n,"t0-0",s._s(e.singer))),i("br")])])])})),0)]):s._e()])},n=[]},7291:function(s,e,t){"use strict";t.r(e);var i=t("19ff"),a=t("bb4f");for(var n in a)"default"!==n&&function(s){t.d(e,s,(function(){return a[s]}))}(n);var o,r=t("f0c5"),c=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);e["default"]=c.exports},"764a":function(s,e,t){"use strict";t.r(e);var i=t("aa31"),a=t.n(i);for(var n in i)"default"!==n&&function(s){t.d(e,s,(function(){return i[s]}))}(n);e["default"]=a.a},"7ff3":function(s,e,t){"use strict";t.r(e);var i=t("840f"),a=t("822f");for(var n in a)"default"!==n&&function(s){t.d(e,s,(function(){return a[s]}))}(n);var o,r=t("f0c5"),c=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);e["default"]=c.exports},8114:function(s,e,t){"use strict";t.r(e);var i=t("286f"),a=t.n(i);for(var n in i)"default"!==n&&function(s){t.d(e,s,(function(){return i[s]}))}(n);e["default"]=a.a},"822f":function(s,e,t){"use strict";t.r(e);var i=t("0810"),a=t.n(i);for(var n in i)"default"!==n&&function(s){t.d(e,s,(function(){return i[s]}))}(n);e["default"]=a.a},"82a9":function(s,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{app:getApp(),songList:[],room_id:0}},onLoad:function(s){this.room_id=s.room_id||0;var e=this;e.getSongList()},onPullDownRefresh:function(){this.getSongList()},onShow:function(){},methods:{getSongList:function(){var s=this;s.app.request({url:"song/songList",data:{room_id:s.room_id},success:function(e){uni.stopPullDownRefresh(),s.songList=e.data}})},urldecode:function(s){return decodeURIComponent(s)},showMenu:function(s){var e=this,t=["\u7f6e\u9876","\u5220\u9664"];uni.showActionSheet({itemList:t,success:function(t){switch(t.tapIndex){case 0:e.app.request({url:"song/push",data:{mid:s.mid,room_id:e.room_id},loading:"\u7f6e\u9876\u4e2d",success:function(s){e.getSongList(),"\u9876\u6b4c\u6210\u529f"==s.msg?uni.showToast({title:s.msg}):uni.showModal({title:"\u7f6e\u9876\u6210\u529f",content:s.msg,showCancel:!1})}});break;case 1:e.app.request({url:"song/remove",data:{mid:s.mid,room_id:e.room_id},loading:"\u79fb\u9664\u4e2d",success:function(s){e.getSongList(),uni.showToast({title:s.msg})}});break;default:}}})}}};e.default=i},"840f":function(s,e,t){"use strict";var i;t.d(e,"b",(function(){return a})),t.d(e,"c",(function(){return n})),t.d(e,"a",(function(){return i}));var a=function(){var s=this,e=s.$createElement,i=s._self._c||e;return i("view",{staticClass:s._$s(0,"sc","uniapp"),attrs:{_i:0}},[s._$s(1,"i",0==s.songList.length)?i("view",[i("view",{staticClass:s._$s(2,"sc","tipImage"),attrs:{_i:2}},[i("image",{staticClass:s._$s(3,"sc","img"),attrs:{src:s._$s(3,"a-src",t("851c")),_i:3}})]),i("view",{staticClass:s._$s(4,"sc","tipText"),attrs:{_i:4}})]):s._e(),s._$s(5,"i",s.songList.length>0)?i("view",{staticClass:s._$s(5,"sc","weui-panel weui-panel_access songList"),attrs:{_i:5}},[i("view",{staticClass:s._$s(6,"sc","weui-panel__bd"),attrs:{_i:6}},s._l(s._$s(7,"f",{forItems:s.songList}),(function(e,t,a,n){return i("view",{key:s._$s(7,"f",{forIndex:a,key:"7-"+n}),staticClass:s._$s("7-"+n,"sc","weui-media-box weui-media-box_appmsg"),attrs:{_i:"7-"+n},on:{click:function(t){return s.showMenu(e)}}},[i("view",{staticClass:s._$s("8-"+n,"sc","weui-media-box__hd"),attrs:{_i:"8-"+n}},[i("img",{staticClass:s._$s("9-"+n,"sc","weui-media-box__thumb song_image"),attrs:{src:s._$s("9-"+n,"a-src",e.pic),_i:"9-"+n}})]),i("view",{staticClass:s._$s("10-"+n,"sc","weui-media-box__bd"),attrs:{_i:"10-"+n}},[i("view",{staticClass:s._$s("11-"+n,"sc","weui-media-box__title"),attrs:{_i:"11-"+n}},[s._v(s._$s("11-"+n,"t0-0",s._s(e.name)))]),i("view",{staticClass:s._$s("12-"+n,"sc","weui-media-box__desc"),attrs:{_i:"12-"+n}},[i("span",[s._v(s._$s("13-"+n,"t0-0",s._s(e.played)))]),s._v(s._$s("12-"+n,"t2-0",s._s(e.singer))),i("br")])])])})),0)]):s._e()])},n=[]},"851c":function(s,e){s.exports="/static/image/alert.png"},"86a1":function(s,e,t){"use strict";t.r(e);var i=t("b31d"),a=t.n(i);for(var n in i)"default"!==n&&function(s){t.d(e,s,(function(){return i[s]}))}(n);e["default"]=a.a},"8bbf":function(s,e){s.exports=Vue},"95c0":function(s,e,t){"use strict";t.r(e);var i=t("201e"),a=t("0395");for(var n in a)"default"!==n&&function(s){t.d(e,s,(function(){return a[s]}))}(n);var o,r=t("f0c5"),c=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);e["default"]=c.exports},a022:function(s,e,t){"use strict";var i;t.d(e,"b",(function(){return a})),t.d(e,"c",(function(){return n})),t.d(e,"a",(function(){return i}));var a=function(){var s=this,e=s.$createElement,i=s._self._c||e;return i("view",{staticClass:s._$s(0,"sc","uniapp"),attrs:{_i:0}},[s._$s(1,"i",0==s.songList.length)?i("view",[i("view",{staticClass:s._$s(2,"sc","tipImage"),attrs:{_i:2}},[i("image",{staticClass:s._$s(3,"sc","img"),attrs:{src:s._$s(3,"a-src",t("851c")),_i:3}})]),i("view",{staticClass:s._$s(4,"sc","tipText"),attrs:{_i:4}})]):s._e(),s._$s(5,"i",s.songList.length>0)?i("view",{staticClass:s._$s(5,"sc","weui-panel weui-panel_access songList"),attrs:{_i:5}},[i("view",{staticClass:s._$s(6,"sc","weui-panel__bd"),attrs:{_i:6}},s._l(s._$s(7,"f",{forItems:s.songList}),(function(e,t,a,n){return i("view",{key:s._$s(7,"f",{forIndex:a,key:"7-"+n}),staticClass:s._$s("7-"+n,"sc","weui-media-box weui-media-box_appmsg"),attrs:{_i:"7-"+n},on:{click:function(t){return s.showMenu(e.song)}}},[i("view",{staticClass:s._$s("8-"+n,"sc","weui-media-box__hd"),attrs:{_i:"8-"+n}},[i("img",{staticClass:s._$s("9-"+n,"sc","weui-media-box__thumb song_image"),attrs:{src:s._$s("9-"+n,"a-src",e.song.pic),_i:"9-"+n}})]),i("view",{staticClass:s._$s("10-"+n,"sc","weui-media-box__bd"),attrs:{_i:"10-"+n}},[i("view",{staticClass:s._$s("11-"+n,"sc","weui-media-box__title"),attrs:{_i:"11-"+n}},[i("span",{staticClass:s._$s("12-"+n,"sc","number"),attrs:{_i:"12-"+n}},[s._v(s._$s("12-"+n,"t0-0",s._s(t+1)))]),s._v(s._$s("11-"+n,"t1-0",s._s(e.song.name))+s._$s("11-"+n,"t1-1",s._s(e.song.singer)))]),i("view",{staticClass:s._$s("13-"+n,"sc","weui-media-box__desc"),attrs:{_i:"13-"+n}},[s._$s("14-"+n,"i",e.at)?[s._v(s._$s("14-"+n,"t0-0",s._s(s.urldecode(e.user.user_name)))+s._$s("14-"+n,"t0-1",s._s(s.urldecode(e.at.user_name))))]:s._e(),s._$s("15-"+n,"i",!e.at)?[s._v(s._$s("15-"+n,"t0-0",s._s(s.urldecode(e.user.user_name))))]:s._e(),i("br")],2)])])})),0)]):s._e()])},n=[]},a9d0:function(s,e,t){"use strict";t.r(e);var i=t("3694"),a=t("764a");for(var n in a)"default"!==n&&function(s){t.d(e,s,(function(){return a[s]}))}(n);var o,r=t("f0c5"),c=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);e["default"]=c.exports},aa11:function(s,e,t){"use strict";t.r(e);var i=t("a022"),a=t("cdff");for(var n in a)"default"!==n&&function(s){t.d(e,s,(function(){return a[s]}))}(n);var o,r=t("f0c5"),c=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);e["default"]=c.exports},aa31:function(s,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{app:getApp(),userInfo:{},formData:{user_name:"",user_head:"",user_remark:"",user_sex:0,user_password:""},sexList:[{value:0,title:"\u5973\u751f"},{value:1,title:"\u7537\u751f"}]}},mounted:function(){},onShow:function(){var s=this;s.getMyInfo()},methods:{getMyInfo:function(){var s=this;s.app.user.getMyInfo({success:function(e){s.userInfo=e,s.formData.user_name=s.urldecode(e.user_name),s.formData.user_remark=e.user_remark,s.formData.user_sex=e.user_sex,s.formData.user_head=e.user_head,s.formData.user_password=""}})},getStaticUrl:function(s){return s.indexOf("https://")>-1||s.indexOf("http://")>-1?s:"https://cdn.bbbug.com/uploads/"+s},chooseImage:function(){var s=this;s.showMenuBox=!1,uni.chooseImage({sizeType:"compressed",sourceType:["album"],count:1,success:function(e){uni.showLoading({title:"\u5904\u7406\u4e2d"}),uni.compressImage({src:e.tempFilePaths[0],quality:50,success:function(e){uni.uploadFile({url:s.app.globalData.request.apiUrl+"attach/uploadimage",filePath:e.tempFilePath,name:"file",formData:Object.assign({},s.app.globalData.request.baseData,{isHead:1}),success:function(e){uni.hideLoading();var t={};try{t=JSON.parse(e.data)}catch(i){uni.showModal({showCancel:!1,title:"\u4e0a\u4f20\u5931\u8d25",content:"\u670d\u52a1\u5668\u53d1\u751f\u9519\u8bef",success:function(){}})}200==t.code?s.formData.user_head=s.getStaticUrl(t.data.attach_thumb):uni.showModal({showCancel:!1,title:"\u4e0a\u4f20\u5931\u8d25",content:t.msg,success:function(){}})}})}})}})},onSexChanged:function(s){this.formData.user_sex=s.target.value},doSubmit:function(){var s=this;s.app.request({url:"user/updateMyInfo",loading:"\u66f4\u65b0\u4e2d",data:s.formData,success:function(s){uni.$emit("IndexReload"),uni.navigateBack()}})},urldecode:function(s){return decodeURIComponent(s)}}};e.default=i},aad4:function(s,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{app:getApp(),userList:[],room_id:0,isMaster:!1}},onLoad:function(s){this.room_id=s.room_id||0,this.isMaster=1==s.room_admin;var e=this;e.getuserList()},onPullDownRefresh:function(){this.getuserList()},onShow:function(){},methods:{getuserList:function(){var s=this;s.app.request({url:"user/online",data:{room_id:s.room_id},success:function(e){uni.stopPullDownRefresh(),s.userList=e.data}})},urldecode:function(s){return decodeURIComponent(s)},showMenu:function(s){var e=this,t=["\u8fdb\u5165\u4e3b\u9875","@\u4e00\u4e0bTa","\u9001\u6b4c\u7ed9Ta"];e.isMaster&&(t=["\u8fdb\u5165\u4e3b\u9875","@\u4e00\u4e0bTa","\u9001\u6b4c\u7ed9Ta","\u7981\u6b62\u70b9\u6b4c","\u7981\u6b62\u53d1\u8a00","\u5168\u90e8\u89e3\u7981"]),uni.showActionSheet({itemList:t,success:function(i){switch(t[i.tapIndex]){case"\u9001\u6b4c\u7ed9Ta":uni.navigateTo({url:"../song/search?room_id="+e.room_id+"&at="+s.user_id+"&name="+s.user_name});break;case"@\u4e00\u4e0bTa":uni.$emit("AtUserEvent",s),uni.navigateBack();break;case"\u5168\u90e8\u89e3\u7981":e.app.request({url:"user/removeban",data:{room_id:e.room_id,user_id:s.user_id},loading:"\u89e3\u7981\u4e2d",success:function(s){uni.showModal({title:"\u89e3\u7981\u6210\u529f",content:s.msg,showCancel:!1,success:function(){e.getuserList()}})}});break;case"\u7981\u6b62\u53d1\u8a00":e.app.request({url:"user/shutdown",data:{room_id:e.room_id,user_id:s.user_id},loading:"\u7981\u8a00\u4e2d",success:function(s){uni.showModal({title:"\u7981\u8a00\u6210\u529f",content:s.msg,showCancel:!1,success:function(){e.getuserList()}})}});break;case"\u7981\u6b62\u70b9\u6b4c":e.app.request({url:"user/songdown",data:{room_id:e.room_id,user_id:s.user_id},loading:"\u7981\u6b4c\u4e2d",success:function(s){uni.showModal({title:"\u7981\u6b4c\u6210\u529f",content:s.msg,showCancel:!1,success:function(){e.getuserList()}})}});break;default:}}})}}};e.default=i},b220:function(s,e,t){"use strict";(function(s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={data:function(){return{}},onLaunch:function(){},onShow:function(){getApp().user.getMyInfo({success:function(s){}})},onHide:function(){},onUniNViewMessage:function(e){s("log","App.vue\u6536\u5230\u6570\u636e"," at App.vue:25"),s("log",JSON.stringify(e.data)," at App.vue:26")},methods:{}};e.default=t}).call(this,t("0de9")["default"])},b31d:function(s,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{app:getApp(),songList:[],keyword:"",room_id:0,page:1,at:0,name:""}},onLoad:function(s){this.room_id=s.room_id||0,this.at=s.at||0,this.name=decodeURIComponent(s.name)||"";this.doSearchSong()},onPullDownRefresh:function(){this.doSearchSong()},onShow:function(){},methods:{doSearchSong:function(){var s=this;uni.hideKeyboard(),s.app.request({url:"song/search",loading:"\u641c\u7d22\u4e2d",data:{keyword:s.keyword,page:s.page},success:function(e){uni.stopPullDownRefresh(),s.songList=e.data}})},urldecode:function(s){return decodeURIComponent(s)},showMenu:function(s){var e=this,t=["\u70b9\u6b4c"];e.at>0&&(t=["\u9001\u6b4c"]),uni.showActionSheet({itemList:t,success:function(t){switch(t.tapIndex){case 0:e.app.request({url:"song/addSong",data:{mid:s.mid,at:e.at,room_id:e.room_id},loading:e.at?"\u9001\u6b4c\u4e2d":"\u70b9\u6b4c\u4e2d",success:function(s){uni.showToast({title:e.at?"\u9001\u6b4c\u6210\u529f":"\u70b9\u6b4c\u6210\u529f"})}});break;default:}}})}}};e.default=i},bb4f:function(s,e,t){"use strict";t.r(e);var i=t("2bc4"),a=t.n(i);for(var n in i)"default"!==n&&function(s){t.d(e,s,(function(){return i[s]}))}(n);e["default"]=a.a},bc86:function(s,e,t){"undefined"===typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(s){var e=this.constructor;return this.then((function(t){return e.resolve(s()).then((function(){return t}))}),(function(t){return e.resolve(s()).then((function(){throw t}))}))}),uni.restoreGlobal&&uni.restoreGlobal(weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),__definePage("pages/room/index",(function(){return Vue.extend(t("4fe7").default)})),__definePage("pages/room/select",(function(){return Vue.extend(t("95c0").default)})),__definePage("pages/room/online",(function(){return Vue.extend(t("f60d").default)})),__definePage("pages/user/login",(function(){return Vue.extend(t("191a").default)})),__definePage("pages/user/index",(function(){return Vue.extend(t("7291").default)})),__definePage("pages/user/motify",(function(){return Vue.extend(t("a9d0").default)})),__definePage("pages/song/my",(function(){return Vue.extend(t("7ff3").default)})),__definePage("pages/song/search",(function(){return Vue.extend(t("6262").default)})),__definePage("pages/song/list",(function(){return Vue.extend(t("aa11").default)}))},cdff:function(s,e,t){"use strict";t.r(e);var i=t("82a9"),a=t.n(i);for(var n in i)"default"!==n&&function(s){t.d(e,s,(function(){return i[s]}))}(n);e["default"]=a.a},d740:function(s,e,t){"use strict";(function(s){t("bc86");var e=a(t("8bbf")),i=a(t("306d"));function a(s){return s&&s.__esModule?s:{default:s}}function n(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable}))),t.push.apply(t,i)}return t}function o(s){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?n(Object(t),!0).forEach((function(e){r(s,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach((function(e){Object.defineProperty(s,e,Object.getOwnPropertyDescriptor(t,e))}))}return s}function r(s,e,t){return e in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}e.default.config.productionTip=!1,i.default.mpType="app",i.default.globalData={request:{apiUrl:"https://api.bbbug.com/api/",baseData:{access_token:"",plat:"app",version:1e4},code:{success:200,access_token_missing:400,login:401,updateForce:301,update:302,error:500}}};var c=new e.default(i.default);c.request=function(e){if(e.type)switch(e.type.toLowerCase()){case"json":e.type="application/json";break;case"form":e.type="application/x-www-form-urlencoded";break;default:}e.type=e.type||"application/json",e.url.indexOf("https://")<0&&e.url.indexOf("http://")<0&&(e.url=i.default.globalData.request.apiUrl+(e.url||"")),i.default.globalData.request.baseData.access_token=uni.getStorageSync("access_token")||"45af3cfe44942c956e026d5fd58f0feffbd3a237",e.loading&&uni.showLoading({mask:!0,title:e.loading}),uni.request({url:e.url,method:e.method||"POST",header:e.header||{"content-type":e.type},data:o(o({},i.default.globalData.request.baseData),e.data||{}),dataType:e.dataType||"json",success:function(t){e.loading&&uni.hideLoading();try{switch(t.data.code){case i.default.globalData.request.code.success:e.success?e.success(t.data):uni.showModal({title:"\u64cd\u4f5c\u6210\u529f",content:t.data.msg,showCancel:!1});break;case i.default.globalData.request.code.access_token_missing:case i.default.globalData.request.code.login:e.login?e.login(t.data):uni.showModal({title:"\u8eab\u4efd\u9a8c\u8bc1\u5931\u8d25",content:t.data.msg,showCancel:!1,success:function(){c.user.login()}});break;case i.default.globalData.request.code.updateForce:uni.showModal({title:"\u5f53\u524d\u7248\u672c\u8fc7\u4f4e",content:t.data.msg,showCancel:!1,success:function(){t.data.data&&plus.runtime.openURL(t.data.data)}});break;default:e.error?e.error(t.data):uni.showModal({title:"\u64cd\u4f5c\u5931\u8d25("+t.data.code+")",content:t.data.msg,showCancel:!1})}}catch(a){e.loading&&uni.hideLoading(),e.fail?e.fail(a):(s("log",a," at main.js:136"),uni.showModal({title:"\u6570\u636e\u5904\u7406\u5931\u8d25",content:"\u89e3\u6790\u670d\u52a1\u5668\u6570\u636e\u5931\u8d25\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5\uff01",showCancel:!1}))}},fail:function(s){e.loading&&uni.hideLoading(),e.fail?e.fail(s):uni.showModal({title:"\u8fde\u63a5\u5931\u8d25",content:"\u7f51\u7edc\u94fe\u63a5\u5931\u8d25\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5\uff01",showCancel:!1})}})},c.user={getMyInfo:function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c.request({url:"user/getMyInfo",success:function(e){s.success&&s.success(e.data)},login:function(e){s.login?s.login(e):c.user.login()},error:function(e){s.error?s.error(e):c.user.login()}})},login:function(){c.globalData.request.baseData.access_token=null,uni.removeStorageSync("access_token"),uni.navigateTo({url:"/pages/user/login",animationType:"slide-in-bottom"})},logout:function(s){uni.showModal({title:"\u6ce8\u9500\u767b\u5f55",content:"\u662f\u5426\u786e\u8ba4\u9000\u51fa\u5f53\u524d\u767b\u5f55\u7684\u5e10\u53f7\uff1f",showCancel:!0,confirmText:"\u6ce8\u9500",success:function(e){e.confirm&&(uni.removeStorageSync("access_token"),c.globalData.request.baseData.access_token="",s.success&&s.success())}})}},c.libs={urlencode:function(s){return encodeURIComponent(s)},urldecode:function(s){return decodeURIComponent(s)}},c.webSocket={config:{wssUrl:""},timer:{heartBeatTimer:null},isConnected:!1,connection:"",closeWss:function(){var e=this;if(!e.isConnected||!e.connection)return!1;e.connection.send({data:"bye"}),s("error","\u5df2\u6267\u884c\u5173\u95ed"," at main.js:249")},heartBeat:function(){var e=this;e.connection&&(clearTimeout(e.timer.heartBeatTimer),e.connection.send({data:"heartBeat"}),s("log","heartBeat"," at main.js:260"),e.timer.heartBeatTimer=setTimeout((function(){e.heartBeat()}),1e4))},reConnect:function(){var s=this;s.isConnected||setTimeout((function(){s.connectWss()}),5e3)},connectWss:function(){var e=this;if(e.isConnected||e.connection)return!1;e.connection=uni.connectSocket({url:e.config.wssUrl,success:function(t){s("log",t," at main.js:281"),e.connection.onOpen((function(s){e.isConnected=!0,uni.hideLoading(),e.heartBeat()})),e.connection.onError((function(t){s("log",t," at main.js:290"),e.isConnected=!1,clearTimeout(e.heartBeatTimer),e.connection=null,uni.hideLoading(),s("error","error.............."," at main.js:295"),e.reConnect()})),e.connection.onClose((function(t){e.isConnected=!1,clearTimeout(e.heartBeatTimer),e.connection=null,uni.hideLoading(),s("error","close.............."," at main.js:303"),e.reConnect()})),e.connection.onMessage((function(e){s("log","\u6d88\u606f\u5230\u8fbe"," at main.js:307"),uni.$emit("WebSocketMessage",decodeURIComponent(e.data))}))}})}},c.$mount()}).call(this,t("0de9")["default"])},e4c4:function(s,e,t){"use strict";var i;t.d(e,"b",(function(){return a})),t.d(e,"c",(function(){return n})),t.d(e,"a",(function(){return i}));var a=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("view",{staticClass:s._$s(0,"sc","uniapp"),attrs:{_i:0}},[s._$s(1,"i",s.showRoomPage)?[t("scroll-view",{staticClass:s._$s(2,"sc","historyList"),style:s._$s(2,"s",{height:s.style.contentViewHeight+"px"}),attrs:{id:"historyList","scroll-top":s._$s(2,"a-scroll-top",s.scrollTop),_i:2},on:{click:s.historyClicked}},[t("view",{attrs:{id:"historyBox",_i:3}},[s._l(s._$s(4,"f",{forItems:s.historyList,fill:!0}),(function(e,i,a,n){return[s._$s("5-"+n,"i","text"==e.type)?[t("view",{class:s._$s("6-"+n,"c",e.user.user_id==s.userInfo.user_id?"item mine":"item"),attrs:{_i:"6-"+n}},[t("view",{staticClass:s._$s("7-"+n,"sc","head"),attrs:{_i:"7-"+n}},[t("image",{staticClass:s._$s("8-"+n,"sc","userHead"),attrs:{src:s._$s("8-"+n,"a-src",e.user.user_head),_i:"8-"+n},on:{longpress:function(t){return s.doAtUser(e.user)},click:function(t){return s.showMenuUserHead(e)}}})]),t("view",{staticClass:s._$s("9-"+n,"sc","body"),attrs:{_i:"9-"+n}},[t("view",{staticClass:s._$s("10-"+n,"sc","userName"),attrs:{_i:"10-"+n}},[s._v(s._$s("10-"+n,"t0-0",s._s(e.user.user_name)))]),s._$s("11-"+n,"i",!e.at)?[s._$s("12-"+n,"i",e.user.user_id==s.userInfo.user_id&&1==s.userInfo.user_sex)?t("pre",{staticClass:s._$s("12-"+n,"sc","content"),attrs:{_i:"12-"+n},domProps:{innerHTML:s._s(s._$s("12-"+n,"v-html",s.urldecode(e.content)))}}):s._e(),s._$s("13-"+n,"i",e.user.user_id==s.userInfo.user_id&&0==s.userInfo.user_sex)?t("pre",{staticClass:s._$s("13-"+n,"sc","content"),attrs:{_i:"13-"+n},domProps:{innerHTML:s._s(s._$s("13-"+n,"v-html",s.urldecode(e.content)))}}):s._e(),s._$s("14-"+n,"i",e.user.user_id!=s.userInfo.user_id)?t("pre",{staticClass:s._$s("14-"+n,"sc","content"),attrs:{_i:"14-"+n},domProps:{innerHTML:s._s(s._$s("14-"+n,"v-html",s.urldecode(e.content)))}}):s._e()]:s._e(),s._$s("15-"+n,"i",e.at)?[s._$s("16-"+n,"i",e.at.user_id==s.userInfo.user_id)?t("pre",{staticClass:s._$s("16-"+n,"sc","content"),attrs:{_i:"16-"+n},domProps:{innerHTML:s._s(s._$s("16-"+n,"v-html","@"+s.urldecode(e.at.user_name)+" "+s.urldecode(e.content)))}}):s._e(),s._$s("17-"+n,"i",e.at.user_id!=s.userInfo.user_id&&e.user.user_id==s.userInfo.user_id&&1==s.userInfo.user_sex)?t("pre",{staticClass:s._$s("17-"+n,"sc","content"),attrs:{_i:"17-"+n},domProps:{innerHTML:s._s(s._$s("17-"+n,"v-html","@"+s.urldecode(e.at.user_name)+" "+s.urldecode(e.content)))}}):s._e(),s._$s("18-"+n,"i",e.at.user_id!=s.userInfo.user_id&&e.user.user_id==s.userInfo.user_id&&0==s.userInfo.user_sex)?t("pre",{staticClass:s._$s("18-"+n,"sc","content"),attrs:{_i:"18-"+n},domProps:{innerHTML:s._s(s._$s("18-"+n,"v-html","@"+s.urldecode(e.at.user_name)+" "+s.urldecode(e.content)))}}):s._e(),s._$s("19-"+n,"i",e.at.user_id!=s.userInfo.user_id&&e.user.user_id!=s.userInfo.user_id)?t("pre",{staticClass:s._$s("19-"+n,"sc","content"),attrs:{_i:"19-"+n},domProps:{innerHTML:s._s(s._$s("19-"+n,"v-html","@"+s.urldecode(e.at.user_name)+" "+s.urldecode(e.content)))}}):s._e()]:s._e()],2)])]:s._e(),s._$s("20-"+n,"i","img"==e.type)?[t("view",{class:s._$s("21-"+n,"c",e.user.user_id==s.userInfo.user_id?"item mine":"item"),attrs:{_i:"21-"+n}},[t("view",{staticClass:s._$s("22-"+n,"sc","head"),attrs:{_i:"22-"+n}},[t("image",{staticClass:s._$s("23-"+n,"sc","userHead"),attrs:{src:s._$s("23-"+n,"a-src",e.user.user_head),_i:"23-"+n},on:{longpress:function(t){return s.doAtUser(e.user)}}})]),t("view",{staticClass:s._$s("24-"+n,"sc","body"),attrs:{_i:"24-"+n}},[t("view",{staticClass:s._$s("25-"+n,"sc","userName"),attrs:{_i:"25-"+n}},[s._v(s._$s("25-"+n,"t0-0",s._s(e.user.user_name)))]),t("view",{staticClass:s._$s("26-"+n,"sc","content image"),attrs:{_i:"26-"+n}},[t("image",{staticClass:s._$s("27-"+n,"sc","img"),attrs:{src:s._$s("27-"+n,"a-src",s.getStaticUrl(s.urldecode(e.content))),_i:"27-"+n},on:{click:function(t){s.fullViewImage(s.getStaticUrl(s.urldecode(e.resource)))}}})])])])]:s._e(),s._$s("28-"+n,"i","system"==e.type)?[t("view",{staticClass:s._$s("29-"+n,"sc","item system"),attrs:{_i:"29-"+n}},[t("span",{staticClass:s._$s("30-"+n,"sc","information"),style:s._$s("30-"+n,"s",{backgroundColor:e.bg||"transparent",color:e.color||"#999"}),attrs:{_i:"30-"+n}},[s._v(s._$s("30-"+n,"t0-0",s._s(e.content)))])])]:s._e()]}))],2)]),t("view",{staticClass:s._$s(31,"sc","chatForm"),attrs:{_i:31}},[t("form",{attrs:{_i:32},on:{submit:s.doSendMessage}},[s._$s(33,"i","text"==s.chatType&&1==s.room.room_sendmsg)?t("input",{directives:[{name:"model",rawName:"v-model",value:s.messageObj.message,expression:"messageObj.message"}],staticClass:s._$s(33,"sc","chatInput"),attrs:{_i:33},domProps:{value:s._$s(33,"v-model",s.messageObj.message)},on:{input:function(e){e.target.composing||s.$set(s.messageObj,"message",e.target.value)}}}):s._e(),s._$s(34,"i","text"==s.chatType&&0==s.room.room_sendmsg)?t("input",{directives:[{name:"model",rawName:"v-model",value:s.messageObj.message,expression:"messageObj.message"}],staticClass:s._$s(34,"sc","chatInput"),attrs:{focus:s._$s(34,"a-focus",s.messageObj.focus),_i:34},domProps:{value:s._$s(34,"v-model",s.messageObj.message)},on:{keydown:s.doKeyDown,input:function(e){e.target.composing||s.$set(s.messageObj,"message",e.target.value)}}}):s._e(),s._$s(35,"i","voice"==s.chatType)?t("input",{staticClass:s._$s(35,"sc","chatInput"),attrs:{_i:35}}):s._e()]),t("view",{staticClass:s._$s(36,"sc","chatButton"),attrs:{_i:36}},[s._$s(37,"i","voice"==s.chatType&&0==s.room.room_sendmsg)?t("view",{staticClass:s._$s(37,"sc","chatType chatIcon"),attrs:{_i:37},on:{click:function(e){s.chatType="text"}}},[t("i",{staticClass:s._$s(38,"sc","iconfont icon-changyongtubiao-mianxing-21"),attrs:{_i:38}})]):s._e(),s._$s(39,"i","text"==s.chatType&&0==s.room.room_sendmsg)?t("view",{staticClass:s._$s(39,"sc","chatType chatIcon"),attrs:{_i:39},on:{click:function(e){s.chatType="voice"}}},[t("i",{staticClass:s._$s(40,"sc","iconfont icon-changyongtubiao-mianxing-36"),attrs:{_i:40}})]):s._e(),t("view",{staticClass:s._$s(41,"sc","chatMore chatIcon"),attrs:{_i:41},on:{click:function(e){s.showMenuBox=!0}}},[t("i",{staticClass:s._$s(42,"sc","iconfont icon-icon_roundadd_fill"),attrs:{_i:42}})])])]),s._$s(43,"i",s.song.song)?t("movable-area",{},[t("movable-view",{attrs:{_i:44},on:{click:s.doMusicClicked}},[t("image",{staticClass:s._$s(45,"sc","playerImage"),attrs:{animation:s._$s(45,"a-animation",s.animationData),src:s._$s(45,"a-src",s.song.song.pic),_i:45}})])]):s._e(),s._$s(46,"i",s.showMenuBox)?t("view",{staticClass:s._$s(46,"sc","menuBox"),attrs:{_i:46}},[t("view",{staticClass:s._$s(47,"sc","menuShadow"),attrs:{_i:47},on:{click:function(e){s.showMenuBox=!1}}}),t("view",{staticClass:s._$s(48,"sc","menuBody"),attrs:{_i:48}},[t("view",{staticClass:s._$s(49,"sc","menuItem"),attrs:{_i:49}},[t("view",{staticClass:s._$s(50,"sc","menuMain"),attrs:{_i:50},on:{click:s.chooseImage}},[t("view",{staticClass:s._$s(51,"sc","menuIcon"),attrs:{_i:51}},[t("view",{staticClass:s._$s(52,"sc","iconfont icon-icon_photo_fill"),attrs:{_i:52}})]),t("view",{staticClass:s._$s(53,"sc","menuTitle"),attrs:{_i:53}})])]),t("view",{staticClass:s._$s(54,"sc","menuItem"),attrs:{_i:54}},[t("view",{staticClass:s._$s(55,"sc","menuMain"),attrs:{_i:55},on:{click:function(e){return s.doOpenPage("addSong")}}},[t("view",{staticClass:s._$s(56,"sc","menuIcon"),attrs:{_i:56}},[t("view",{staticClass:s._$s(57,"sc","iconfont icon-icon_invite_fill"),attrs:{_i:57}})]),t("view",{staticClass:s._$s(58,"sc","menuTitle"),attrs:{_i:58}})])]),t("view",{staticClass:s._$s(59,"sc","menuItem"),attrs:{_i:59}},[t("view",{staticClass:s._$s(60,"sc","menuMain"),attrs:{_i:60},on:{click:function(e){return s.doOpenPage("songList")}}},[t("view",{staticClass:s._$s(61,"sc","menuIcon"),attrs:{_i:61}},[t("view",{staticClass:s._$s(62,"sc","iconfont icon-icon_dingtab"),attrs:{_i:62}})]),t("view",{staticClass:s._$s(63,"sc","menuTitle"),attrs:{_i:63}})])]),t("view",{staticClass:s._$s(64,"sc","menuItem"),attrs:{_i:64}},[t("view",{staticClass:s._$s(65,"sc","menuMain"),attrs:{_i:65},on:{click:function(e){return s.doOpenPage("mySong")}}},[t("view",{staticClass:s._$s(66,"sc","menuIcon"),attrs:{_i:66}},[t("view",{staticClass:s._$s(67,"sc","iconfont icon-icon_people_fill"),attrs:{_i:67}})]),t("view",{staticClass:s._$s(68,"sc","menuTitle"),attrs:{_i:68}})])]),t("view",{staticClass:s._$s(69,"sc","menuItem"),attrs:{_i:69}},[t("view",{staticClass:s._$s(70,"sc","menuMain"),attrs:{_i:70},on:{click:function(e){return s.doOpenPage("onLine")}}},[t("view",{staticClass:s._$s(71,"sc","menuIcon"),attrs:{_i:71}},[t("view",{staticClass:s._$s(72,"sc","iconfont icon-icon_meeting_fill"),attrs:{_i:72}})]),t("view",{staticClass:s._$s(73,"sc","menuTitle"),attrs:{_i:73}})])]),t("view",{staticClass:s._$s(74,"sc","menuItem"),attrs:{_i:74}},[t("view",{staticClass:s._$s(75,"sc","menuMain"),attrs:{_i:75},on:{click:function(e){return s.doOpenPage("invate")}}},[t("view",{staticClass:s._$s(76,"sc","menuIcon"),attrs:{_i:76}},[t("view",{staticClass:s._$s(77,"sc","iconfont icon-changyongtubiao-mianxing-37"),attrs:{_i:77}})]),t("view",{staticClass:s._$s(78,"sc","menuTitle"),attrs:{_i:78}})])]),t("view",{staticClass:s._$s(79,"sc","menuItem"),attrs:{_i:79}},[t("view",{staticClass:s._$s(80,"sc","menuMain"),attrs:{_i:80},on:{click:function(e){return s.doOpenPage("setting")}}},[t("view",{staticClass:s._$s(81,"sc","menuIcon"),attrs:{_i:81}},[t("view",{staticClass:s._$s(82,"sc","iconfont icon-changyongtubiao-mianxing-32"),attrs:{_i:82}})]),t("view",{staticClass:s._$s(83,"sc","menuTitle"),attrs:{_i:83}})])])])]):s._e()]:s._e(),s._$s(84,"i",s.showPasswordForm)?t("view",{staticClass:s._$s(84,"sc","formPassword"),attrs:{_i:84}},[t("form",{attrs:{_i:85},on:{submit:s.getRoomInfo}},[t("view",{staticClass:s._$s(86,"sc","formPasswordTitle"),attrs:{_i:86}}),t("view",{staticClass:s._$s(87,"sc","formPasswordInput"),attrs:{_i:87}},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.password,expression:"password"}],attrs:{_i:88},domProps:{value:s._$s(88,"v-model",s.password)},on:{input:function(e){e.target.composing||(s.password=e.target.value)}}})])])]):s._e()],2)},n=[]},ec2a:function(s,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{loading:!1,isEntering:!1,app:getApp(),roomList:[],userInfo:!1,topHeight:0,typeList:[{value:0,title:"\u666e\u901a\u6587\u5b57\u804a\u5929\u623f"},{value:1,title:"\u4e00\u8d77\u542c\u6b4c\u97f3\u4e50\u623f"},{value:2,title:"\u542c\u6b4c\u731c\u6b4c\u6e38\u620f\u623f"}]}},mounted:function(){},onLoad:function(){var s=this;s.loading=!0},onShow:function(){var s=this;s.app.user.getMyInfo({success:function(e){s.userInfo=e,s.getHotRooms()}})},onPullDownRefresh:function(){this.getHotRooms()},onNavigationBarButtonTap:function(s){var e=this;switch(s.text){case"\u521b\u5efa":e.userInfo&&e.userInfo.myRoom?uni.showModal({title:"\u5df2\u6709\u623f\u95f4",content:"\u4f60\u5df2\u7ecf\u521b\u5efa\u4e86'"+e.userInfo.myRoom.room_name+"',\u662f\u5426\u8fdb\u5165\u8be5\u623f\u95f4?",confirmText:"\u8fdb\u5165\u623f\u95f4",success:function(s){s.confirm&&(uni.showLoading({title:"\u8fde\u63a5\u623f\u95f4\u4e2d"}),e.doLoopToEnter(e.userInfo.myRoom))}}):uni.navigateTo({url:"../room/create"});break;default:}},methods:{getHotRooms:function(){var s=this;s.app.request({url:"room/hotRooms",loading:!!s.loading&&"Loading...",data:{},success:function(e){uni.stopPullDownRefresh(),s.loading=!1,s.roomList=e.data}})},doEnterRoom:function(s){var e=this;uni.showModal({title:"\u6362\u623f\u63d0\u9192",content:"\u6362\u623f\u5c06\u9000\u51fa\u4e4b\u524d\u6240\u5728\u7684\u623f\u95f4,\u662f\u5426\u786e\u8ba4?",cancelText:"\u505c\u7559",confirmColor:"#FF4500",confirmText:"\u786e\u8ba4",success:function(t){t.confirm&&(uni.showLoading({title:"\u8fde\u63a5\u623f\u95f4\u4e2d"}),e.doLoopToEnter(s))}})},doLoopToEnter:function(s){var e=this;e.app.webSocket.isConnected?(e.isEntering||(e.app.webSocket.closeWss(),e.isEntering=!0),setTimeout((function(){e.doLoopToEnter(s)}),100)):(uni.hideLoading(),uni.$emit("RoomChanged",s.room_id),uni.navigateBack())}}};e.default=i},f0c5:function(s,e,t){"use strict";function i(s,e,t,i,a,n,o,r,c,u){var l,_="function"===typeof s?s.options:s;if(c){_.components||(_.components={});var d=Object.prototype.hasOwnProperty;for(var f in c)d.call(c,f)&&!d.call(_.components,f)&&(_.components[f]=c[f])}if(u&&((u.beforeCreate||(u.beforeCreate=[])).unshift((function(){this[u.__module]=this})),(_.mixins||(_.mixins=[])).push(u)),e&&(_.render=e,_.staticRenderFns=t,_._compiled=!0),i&&(_.functional=!0),n&&(_._scopeId="data-v-"+n),o?(l=function(s){s=s||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,s||"undefined"===typeof __VUE_SSR_CONTEXT__||(s=__VUE_SSR_CONTEXT__),a&&a.call(this,s),s&&s._registeredComponents&&s._registeredComponents.add(o)},_._ssrRegister=l):a&&(l=r?function(){a.call(this,this.$root.$options.shadowRoot)}:a),l)if(_.functional){_._injectStyles=l;var m=_.render;_.render=function(s,e){return l.call(e),m(s,e)}}else{var g=_.beforeCreate;_.beforeCreate=g?[].concat(g,l):[l]}return{exports:s,options:_}}t.d(e,"a",(function(){return i}))},f60d:function(s,e,t){"use strict";t.r(e);var i=t("31c4"),a=t("51d9");for(var n in a)"default"!==n&&function(s){t.d(e,s,(function(){return a[s]}))}(n);var o,r=t("f0c5"),c=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);e["default"]=c.exports}},[["d740","app-config"]]]);